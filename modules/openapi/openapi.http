POST http://localhost:9529/api/component-protocol/actions/render?scenario=auto-test-plan-detail
Authorization: Bearer xxx
org: terminus
Content-Type: application/json
openapi-csrf-token: a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09
cookie: taid=586413ea-1564-4175-9965-5475818698c5; Hm_lvt_210739f1f314f3bf914d4ecf7cfa151b=1627872423; Hm_lpvt_210739f1f314f3bf914d4ecf7cfa151b=1627882787; lng=zh-CN; u_c_captain_dev_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiI2ZTcwMzI1ZDY0MDRkNGQwOTI1ZDFiMzU0YmMxMjY1NGNjZmUyMGNlZTFiOWQ3ZGQ0YjdmOWI2NjRmYWE5N2I3IiwibmJmIjoxNjI5OTc2NzYyLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDU4MTU2MiwiaWF0IjoxNjI5OTc2NzYyfQ.l2E_mYeDsxKWycoJXmwcclUN7wq8PafOB5lAzXVsmrQ; OPENAPISESSION=07092eae-3668-4029-abe6-54787ac32d52; u_c_captain_hkci_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiIyYjllYzhlMGRjNDdhODFmNjIzODJlZTg1OTkxZDc3M2RhMTdlYWIyMWUyMzgzNTMxMDM4N2FmZDU0NWYyMzJjIiwibmJmIjoxNjMwMTI4MjkzLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDczMzA5MywiaWF0IjoxNjMwMTI4MjkzfQ.Mtsr-U5n7ygnb_91kpU-ue8_FWjA7CXHuegUqLJiLfo; OPENAPI-CSRF-TOKEN=a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09


{"scenario":{"scenarioType":"auto-test-plan-detail","scenarioKey":"auto-test-plan-detail"},"inParams":{"projectId":6,"testPlanId":4}}

###

POST http://localhost:9529/api/component-protocol/actions/render?scenario=auto-test-plan-detail
Authorization: Bearer xxx
org: terminus
Content-Type: application/json
openapi-csrf-token: a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09
cookie: taid=586413ea-1564-4175-9965-5475818698c5; Hm_lvt_210739f1f314f3bf914d4ecf7cfa151b=1627872423; Hm_lpvt_210739f1f314f3bf914d4ecf7cfa151b=1627882787; lng=zh-CN; u_c_captain_dev_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiI2ZTcwMzI1ZDY0MDRkNGQwOTI1ZDFiMzU0YmMxMjY1NGNjZmUyMGNlZTFiOWQ3ZGQ0YjdmOWI2NjRmYWE5N2I3IiwibmJmIjoxNjI5OTc2NzYyLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDU4MTU2MiwiaWF0IjoxNjI5OTc2NzYyfQ.l2E_mYeDsxKWycoJXmwcclUN7wq8PafOB5lAzXVsmrQ; OPENAPISESSION=07092eae-3668-4029-abe6-54787ac32d52; u_c_captain_hkci_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiIyYjllYzhlMGRjNDdhODFmNjIzODJlZTg1OTkxZDc3M2RhMTdlYWIyMWUyMzgzNTMxMDM4N2FmZDU0NWYyMzJjIiwibmJmIjoxNjMwMTI4MjkzLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDczMzA5MywiaWF0IjoxNjMwMTI4MjkzfQ.Mtsr-U5n7ygnb_91kpU-ue8_FWjA7CXHuegUqLJiLfo; OPENAPI-CSRF-TOKEN=a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09

{"scenario":{"scenarioType":"auto-test-plan-detail","scenarioKey":"auto-test-plan-detail"},"protocol":{"version":"","scenario":"auto-test-plan-detail","state":{"_error_":""},"hierarchy":{"version":"","root":"fileDetail","structure":{"executeHead":{"left":"executeInfoTitle","right":["refreshButton","cancelExecuteButton","executeHistory"]},"executeHistory":{"children":"executeHistoryButton","content":"executeHistoryPop"},"executeHistoryPop":["executeHistoryRefresh","executeHistoryTable"],"fileConfig":["fileInfoHead","fileInfo","stagesTitle","stages","stagesOperations"],"fileDetail":{"children":["fileConfig","fileExecute"],"tabBarExtraContent":["tabExecuteButton"]},"fileExecute":["executeHead","executeInfo","executeTaskTitle","executeTaskBreadcrumb","executeTaskTable","executeAlertInfo"],"fileInfoHead":{"left":"fileInfoTitle"},"scenesSetDrawer":{"content":["scenesSetSelect","scenesSetInParams"]},"stagesOperations":["addScenesSetButton","scenesSetDrawer"]}},"components":{"addScenesSetButton":{"type":"Button","name":"addScenesSetButton","props":{"text":"+ 场景集"},"state":{"testPlanId":4},"operations":{"click":{"key":"addApi","reload":true}}},"cancelExecuteButton":{"type":"Button","name":"cancelExecuteButton","props":{"text":"取消执行","visible":true},"state":{"pipelineDetail":{"clusterName":"terminus-dev","commitDetail":{},"extra":{"configmanageNamespaces":["autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452"],"isAutoRun":true,"runUser":{"id":"2","name":"dice"},"submitUser":{"id":"2","name":"dice"}},"id":8650,"labels":{"has-report-auto-test-plan":"true"},"namespace":"pipeline-8650","needApproval":false,"pipelineButton":{"canCancel":true,"canDelete":false,"canForceCancel":false,"canManualRun":false,"canPause":false,"canRerun":false,"canRerunFailed":false,"canStartCron":false,"canStopCron":false,"canUnpause":false},"pipelineCron":{"applicationID":0,"basePipelineID":0,"branch":"","cronExpr":"","cronStartTime":null,"enable":null,"id":0,"pipelineYmlName":"","timeCreated":"0001-01-01T00:00:00Z","timeUpdated":"0001-01-01T00:00:00Z"},"pipelineSnippetStages":null,"pipelineStages":[{"costTimeSec":-1,"id":9318,"name":"","pipelineID":8650,"pipelineTasks":[{"costTimeSec":-1,"extra":{"allowFailure":false,"taskContainers":null,"uuid":""},"id":9421,"isSnippet":true,"labels":{"AUTOTESTTYPE":"SCENESET","SCENESET":"eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0="},"name":"32","opType":"","pipelineID":8650,"queueTimeSec":-1,"result":{},"snippetPipelineID":8651,"stageID":9318,"status":"Running","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00","type":"snippet"}],"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00"}],"pipelineTaskActionDetails":{"snippet":{"description":"嵌套流水线可以声明嵌套的其他 pipeline.yml","displayName":"嵌套流水线","logoUrl":"http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/10/22/410935c6-e399-463a-b87b-0b774240d12e.png"}},"progress":0,"runParams":null,"source":"autotest","status":"Running","timeBegin":"2021-08-31T14:37:38+08:00","timeCreated":"2021-08-31T14:37:38+08:00","timeUpdated":"2021-08-31T14:37:38+08:00","ymlContent":"version: \\\"1.1\\\"\nstages:\n  - stage:\n      - snippet:\n          alias: \\\"32\\\"\n          labels:\n            AUTOTESTTYPE: SCENESET\n            SCENESET: eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0=\n          snippet_config:\n            source: autotest\n            name: \\\"149\\\"\n            labels:\n              autotestExecType: sceneSets\n              sceneSetID: \\\"149\\\"\n              spaceID: \\\"8\\\"\n          if: ${{ 1 == 1 }}\n","ymlName":"autotest-plan-4"},"pipelineId":8650},"operations":{"click":{"key":"cancelExecute","reload":true}}},"executeAlertInfo":{"type":"Alert","name":"executeAlertInfo","props":{"message":null,"showIcon":true,"type":"warning","visible":false},"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":{"data":null}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"state":{"pipelineDetail":{"clusterName":"terminus-dev","commitDetail":{},"extra":{"configmanageNamespaces":["autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452"],"isAutoRun":true,"runUser":{"id":"2","name":"dice"},"submitUser":{"id":"2","name":"dice"}},"id":8650,"labels":{"has-report-auto-test-plan":"true"},"namespace":"pipeline-8650","needApproval":false,"pipelineButton":{"canCancel":true,"canDelete":false,"canForceCancel":false,"canManualRun":false,"canPause":false,"canRerun":false,"canRerunFailed":false,"canStartCron":false,"canStopCron":false,"canUnpause":false},"pipelineCron":{"applicationID":0,"basePipelineID":0,"branch":"","cronExpr":"","cronStartTime":null,"enable":null,"id":0,"pipelineYmlName":"","timeCreated":"0001-01-01T00:00:00Z","timeUpdated":"0001-01-01T00:00:00Z"},"pipelineSnippetStages":null,"pipelineStages":[{"costTimeSec":-1,"id":9318,"name":"","pipelineID":8650,"pipelineTasks":[{"costTimeSec":-1,"extra":{"allowFailure":false,"taskContainers":null,"uuid":""},"id":9421,"isSnippet":true,"labels":{"AUTOTESTTYPE":"SCENESET","SCENESET":"eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0="},"name":"32","opType":"","pipelineID":8650,"queueTimeSec":-1,"result":{},"snippetPipelineID":8651,"stageID":9318,"status":"Running","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00","type":"snippet"}],"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00"}],"pipelineTaskActionDetails":{"snippet":{"description":"嵌套流水线可以声明嵌套的其他 pipeline.yml","displayName":"嵌套流水线","logoUrl":"http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/10/22/410935c6-e399-463a-b87b-0b774240d12e.png"}},"progress":0,"runParams":null,"source":"autotest","status":"Running","timeBegin":"2021-08-31T14:37:38+08:00","timeCreated":"2021-08-31T14:37:38+08:00","timeUpdated":"2021-08-31T14:37:38+08:00","ymlContent":"version: \\\"1.1\\\"\nstages:\n  - stage:\n      - snippet:\n          alias: \\\"32\\\"\n          labels:\n            AUTOTESTTYPE: SCENESET\n            SCENESET: eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0=\n          snippet_config:\n            source: autotest\n            name: \\\"149\\\"\n            labels:\n              autotestExecType: sceneSets\n              sceneSetID: \\\"149\\\"\n              spaceID: \\\"8\\\"\n          if: ${{ 1 == 1 }}\n","ymlName":"autotest-plan-4"},"pipelineId":8650,"taskId":0}},"executeHead":{"type":"LRContainer","name":"executeHead"},"executeHistory":{"type":"Popover","name":"executeHistory","props":{"placement":"bottomRight","size":"l","title":"执行历史","trigger":"click"}},"executeHistoryButton":{"type":"Button","name":"executeHistoryButton","props":{"text":"执行历史","visible":true},"state":{"visible":true}},"executeHistoryPop":{"type":"Container","name":"executeHistoryPop"},"executeHistoryRefresh":{"type":"Button","name":"executeHistoryRefresh","props":{"prefixIcon":"shuaxin","style":{"width":140},"text":"返回最新记录","type":"text"},"state":{"pageNo":1},"operations":{"click":{"key":"toNewRecord","reload":true}}},"executeHistoryTable":{"type":"Table","name":"executeHistoryTable","props":{"columns":[{"title":"版本","dataIndex":"version","width":60},{"title":"ID","dataIndex":"pipelineId"},{"title":"状态","dataIndex":"status"},{"title":"执行人","dataIndex":"runUser"},{"title":"触发时间","dataIndex":"triggerTime"}],"rowKey":"id"},"data":{"list":[{"pipelineId":8650,"runUser":"dice","status":{"renderType":"textWithBadge","status":"processing","value":"正在执行"},"triggerTime":"2021-08-31 14:37:38","version":"#50"},{"pipelineId":8620,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:31:26","version":"#49"},{"pipelineId":8577,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:20:46","version":"#48"},{"pipelineId":8572,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:20:30","version":"#47"},{"pipelineId":8534,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:10:18","version":"#46"},{"pipelineId":8523,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:09:13","version":"#45"},{"pipelineId":8515,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:08:29","version":"#44"},{"pipelineId":8510,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:08:12","version":"#43"},{"pipelineId":8503,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:07:54","version":"#42"},{"pipelineId":8498,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:07:48","version":"#41"},{"pipelineId":8493,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:07:33","version":"#40"},{"pipelineId":8485,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:05:14","version":"#39"},{"pipelineId":8480,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:05:13","version":"#38"},{"pipelineId":8475,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"取消"},"triggerTime":"2021-08-31 14:05:11","version":"#37"},{"pipelineId":8464,"runUser":"dice","status":{"renderType":"textWithBadge","status":"error","value":"执行失败"},"triggerTime":"2021-08-31 14:03:58","version":"#36"}]},"state":{"pageNo":1,"pageSize":15,"pipelineId":8650,"total":50},"operations":{"changePageNo":{"key":"changePageNo","reload":true,"fillMeta":"","meta":null},"clickRow":{"key":"clickRow","reload":true,"fillMeta":"rowData","meta":{"rowData":""}}}},"executeInfo":{"type":"Panel","name":"executeInfo","props":{"fields":[{"label":"流水线ID","valueKey":"pipelineID"},{"label":"状态","valueKey":"status"},{"label":"时长","valueKey":"time"},{"label":"开始时间","valueKey":"timeBegin"},{"label":"结束时间","valueKey":"timeEnd"},{"label":"接口总数","valueKey":"autoTestNum"},{"label":"接口执行率","valueKey":"autoTestExecPercent"},{"label":"接口通过率","valueKey":"autoTestSuccessPercent"}]},"data":{"data":{"pipelineID":8650,"status":"正在执行","timeBegin":"2021-08-31 14:37:38"}},"state":{"pipelineDetail":{"clusterName":"terminus-dev","commitDetail":{},"extra":{"configmanageNamespaces":["autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452"],"isAutoRun":true,"runUser":{"id":"2","name":"dice"},"submitUser":{"id":"2","name":"dice"}},"id":8650,"labels":{"has-report-auto-test-plan":"true"},"namespace":"pipeline-8650","needApproval":false,"pipelineButton":{"canCancel":true,"canDelete":false,"canForceCancel":false,"canManualRun":false,"canPause":false,"canRerun":false,"canRerunFailed":false,"canStartCron":false,"canStopCron":false,"canUnpause":false},"pipelineCron":{"applicationID":0,"basePipelineID":0,"branch":"","cronExpr":"","cronStartTime":null,"enable":null,"id":0,"pipelineYmlName":"","timeCreated":"0001-01-01T00:00:00Z","timeUpdated":"0001-01-01T00:00:00Z"},"pipelineSnippetStages":null,"pipelineStages":[{"costTimeSec":-1,"id":9318,"name":"","pipelineID":8650,"pipelineTasks":[{"costTimeSec":-1,"extra":{"allowFailure":false,"taskContainers":null,"uuid":""},"id":9421,"isSnippet":true,"labels":{"AUTOTESTTYPE":"SCENESET","SCENESET":"eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0="},"name":"32","opType":"","pipelineID":8650,"queueTimeSec":-1,"result":{},"snippetPipelineID":8651,"stageID":9318,"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00","type":"snippet"}],"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00"}],"pipelineTaskActionDetails":{"snippet":{"description":"嵌套流水线可以声明嵌套的其他 pipeline.yml","displayName":"嵌套流水线","logoUrl":"http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/10/22/410935c6-e399-463a-b87b-0b774240d12e.png"}},"progress":0,"runParams":null,"source":"autotest","status":"Running","timeBegin":"2021-08-31T14:37:38+08:00","timeCreated":"2021-08-31T14:37:38+08:00","timeUpdated":"2021-08-31T14:37:38+08:00","ymlContent":"version: \\\"1.1\\\"\nstages:\n  - stage:\n      - snippet:\n          alias: \\\"32\\\"\n          labels:\n            AUTOTESTTYPE: SCENESET\n            SCENESET: eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0=\n          snippet_config:\n            source: autotest\n            name: \\\"149\\\"\n            labels:\n              autotestExecType: sceneSets\n              sceneSetID: \\\"149\\\"\n              spaceID: \\\"8\\\"\n          if: ${{ 1 == 1 }}\n","ymlName":"autotest-plan-4"},"pipelineId":8650}},"executeInfoTitle":{"type":"Title","name":"executeInfoTitle","props":{"level":2,"title":"执行详情"}},"executeTaskBreadcrumb":{"type":"Breadcrumb","name":"executeTaskBreadcrumb","props":{},"data":{"list":[{"key":"8650","item":"plan1"}]},"state":{"name":"plan1","pipelineId":8650,"unfold":false,"visible":true},"operations":{"click":{"fillMeta":"key","key":"selectItem","meta":{"key":""},"reload":true}}},"executeTaskTable":{"type":"Table","name":"executeTaskTable","props":{"columns":[{"title":"步骤名称","dataIndex":"name","width":200,"ellipsis":true,"fixed":"left"},{"title":"步骤类型","dataIndex":"type","width":85,"ellipsis":true,"fixed":""},{"title":"子任务数","dataIndex":"tasksNum","width":85,"ellipsis":true,"fixed":""},{"title":"接口路径","dataIndex":"path","ellipsis":false,"fixed":""},{"title":"状态","dataIndex":"status","width":120,"ellipsis":true,"fixed":""},{"title":"操作","dataIndex":"operate","width":120,"ellipsis":true,"fixed":"right"}],"rowKey":"id","scroll":{"x":1200}},"data":{"list":[{"id":9421,"name":"st1","operate":{"renderType":"tableOperation"},"path":"","snippetPipelineID":8651,"status":{"renderType":"textWithBadge","status":"default","value":"初始化成功"},"tasksNum":"-","type":"场景集"}]},"state":{"name":"wtf","pageNo":1,"pageSize":15,"pipelineDetail":{"clusterName":"terminus-dev","commitDetail":{},"extra":{"configmanageNamespaces":["autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452"],"isAutoRun":true,"runUser":{"id":"2","name":"dice"},"submitUser":{"id":"2","name":"dice"}},"id":8650,"labels":{"has-report-auto-test-plan":"true"},"namespace":"pipeline-8650","needApproval":false,"pipelineButton":{"canCancel":true,"canDelete":false,"canForceCancel":false,"canManualRun":false,"canPause":false,"canRerun":false,"canRerunFailed":false,"canStartCron":false,"canStopCron":false,"canUnpause":false},"pipelineCron":{"applicationID":0,"basePipelineID":0,"branch":"","cronExpr":"","cronStartTime":null,"enable":null,"id":0,"pipelineYmlName":"","timeCreated":"0001-01-01T00:00:00Z","timeUpdated":"0001-01-01T00:00:00Z"},"pipelineSnippetStages":null,"pipelineStages":[{"costTimeSec":-1,"id":9318,"name":"","pipelineID":8650,"pipelineTasks":[{"costTimeSec":-1,"extra":{"allowFailure":false,"taskContainers":null,"uuid":""},"id":9421,"isSnippet":true,"labels":{"AUTOTESTTYPE":"SCENESET","SCENESET":"eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0="},"name":"32","opType":"","pipelineID":8650,"queueTimeSec":-1,"result":{},"snippetPipelineID":8651,"stageID":9318,"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00","type":"snippet"}],"status":"Analyzed","timeBegin":"0001-01-01T00:00:00Z","timeCreated":"2021-08-31T14:37:38+08:00","timeEnd":"0001-01-01T00:00:00Z","timeUpdated":"2021-08-31T14:37:38+08:00"}],"pipelineTaskActionDetails":{"snippet":{"description":"嵌套流水线可以声明嵌套的其他 pipeline.yml","displayName":"嵌套流水线","logoUrl":"http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/10/22/410935c6-e399-463a-b87b-0b774240d12e.png"}},"progress":0,"runParams":null,"source":"autotest","status":"Running","timeBegin":"2021-08-31T14:37:38+08:00","timeCreated":"2021-08-31T14:37:38+08:00","timeUpdated":"2021-08-31T14:37:38+08:00","ymlContent":"version: \\\"1.1\\\"\nstages:\n  - stage:\n      - snippet:\n          alias: \\\"32\\\"\n          labels:\n            AUTOTESTTYPE: SCENESET\n            SCENESET: eyJzY2VuZVNldElEIjoxNDksInNjZW5lU2V0TmFtZSI6InN0MSIsInByZUlEIjowLCJwbGFuSUQiOjQsImlkIjozMn0=\n          snippet_config:\n            source: autotest\n            name: \\\"149\\\"\n            labels:\n              autotestExecType: sceneSets\n              sceneSetID: \\\"149\\\"\n              spaceID: \\\"8\\\"\n          if: ${{ 1 == 1 }}\n","ymlName":"autotest-plan-4"},"pipelineId":8421,"stepId":0,"total":1,"unfold":false},"operations":{"changePageNo":{"key":"changePageNo","reload":true,"fillMeta":"","meta":null,"clickableKeys":null},"clickRow":{"key":"clickRow","reload":true,"fillMeta":"target","meta":null,"clickableKeys":[9421]}}},"executeTaskTitle":{"type":"Title","name":"executeTaskTitle","props":{"level":2,"title":"执行步骤"}},"fileConfig":{"type":"Container","name":"fileConfig","props":{"visible":true},"state":{"activeKey":"Config","visible":true}},"fileDetail":{"type":"Tabs","name":"fileDetail","props":{"tabMenu":[{"key":"Config","name":"配置信息"},{"key":"Execute","name":"执行明细"}]},"state":{"activeKey":"Execute","spaceId":8,"testPlanId":4},"operations":{"onChange":{"key":"changeViewType","reload":true}}},"fileExecute":{"type":"Container","name":"fileExecute"},"fileHistory":{"type":"Popover","name":"fileHistory"},"fileHistoryButton":{"type":"Button","name":"fileHistoryButton"},"fileHistoryTable":{"type":"Table","name":"fileHistoryTable"},"fileInfo":{"type":"Panel","name":"fileInfo","props":{"fields":[{"label":"名称","valueKey":"name"},{"label":"创建人","valueKey":"creatorID"},{"label":"创建时间","valueKey":"createAtString"},{"label":"更新人","valueKey":"updaterID"},{"label":"更新时间","valueKey":"updateAtString"}],"visible":true},"data":{"data":{"createAtString":"2021-08-26 11:46:52","creatorID":"dice","description":"","name":"plan1","updateAtString":"2021-08-31 11:46:37","updaterID":"dice"}},"state":{"testPlanId":4,"visible":true}},"fileInfoHead":{"type":"LRContainer","name":"fileInfoHead"},"fileInfoTitle":{"type":"Title","name":"fileInfoTitle","props":{"level":2,"title":"计划详情"}},"refreshButton":{"type":"Button","name":"refreshButton","props":{"prefixIcon":"shuaxin","text":"刷新"},"state":{"pipelineId":8650,"visible":false},"operations":{"click":{"key":"refresh","reload":true}}},"resultDrawer":{"type":"Drawer","name":"resultDrawer"},"resultPreview":{"type":"InfoPreview","name":"resultPreview"},"scenesSetDrawer":{"type":"Drawer","name":"scenesSetDrawer"},"scenesSetInParams":{"type":"Form","name":"scenesSetInParams"},"scenesSetSelect":{"type":"TreeSelect","name":"scenesSetSelect"},"stages":{"type":"SortGroup","name":"stages","props":{"groupDraggable":false,"visible":true},"data":{"type":"sort-item","value":[{"groupId":0,"id":32,"operations":{"add":{"disabled":false,"disabledTip":"","fillMeta":"","hoverShow":true,"hoverTip":"添加步骤","icon":"add","key":"addParallelAPI","meta":{"data":null,"id":32},"reload":true,"text":""},"delete":{"disabled":false,"disabledTip":"","fillMeta":"","hoverShow":false,"hoverTip":"","icon":"shanchu","key":"deleteAPI","meta":{"data":null,"id":32},"reload":true,"text":""}},"title":"场景集: st1"}]},"state":{"showScenesSetDrawer":false,"stepId":0,"testPlanId":4,"visible":true},"operations":{"clickItem":{"disabled":false,"disabledTip":"","fillMeta":"data","hoverShow":false,"hoverTip":"","icon":"","key":"clickItem","meta":{"data":null,"id":0},"reload":true,"text":""},"moveItem":{"disabled":false,"disabledTip":"","fillMeta":"","hoverShow":false,"hoverTip":"","icon":"","key":"moveItem","meta":{"data":null,"id":0},"reload":true,"text":""}}},"stagesOperations":{"type":"RowContainer","name":"stagesOperations"},"stagesTitle":{"type":"Title","name":"stagesTitle","props":{"level":2,"title":"计划步骤"}},"tabExecuteButton":{"type":"Button","name":"tabExecuteButton","props":{"menu":[{"key":"无","operations":{"click":{"key":"execute","meta":{"ConfigEnv":"","env":"terminus-dev","testPlanID":4},"reload":true}},"text":"无"},{"key":"autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452","operations":{"click":{"key":"execute","meta":{"ConfigEnv":"autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452","env":"terminus-dev","testPlanID":4},"reload":true}},"text":"a"}],"text":"执行","type":"primary"},"state":{"activeKey":"Execute","env":"","testPlanID":4}}},"rendering":{"__DefaultRendering__":[{"name":"fileDetail","state":[]},{"name":"fileConfig","state":[{"name":"activeKey","value":"{{ fileDetail.activeKey }}"}]},{"name":"fileInfoHead","state":[]},{"name":"fileInfoTitle","state":[]},{"name":"fileInfo","state":[{"name":"testPlanId","value":"{{ fileDetail.testPlanId }}"},{"name":"visible","value":"{{ fileConfig.visible }}"}]},{"name":"stagesTitle","state":[]},{"name":"stages","state":[{"name":"testPlanId","value":"{{ fileDetail.testPlanId }}"},{"name":"visible","value":"{{ fileConfig.visible }}"}]},{"name":"stagesOperations","state":[]},{"name":"tabExecuteButton","state":[{"name":"testPlanId","value":"{{ fileDetail.testPlanId }}"}]},{"name":"addScenesSetButton","state":[{"name":"testPlanId","value":"{{ fileDetail.testPlanId }}"}]}],"addScenesSetButton":[{"name":"stages","state":[]},{"name":"scenesSetDrawer","state":[{"name":"visible","value":"{{ addScenesSetButton.showScenesSetDrawer }}"}]},{"name":"scenesSetSelect","state":[{"name":"visible","value":"{{ scenesSetDrawer.visible }}"},{"name":"testPlanStepId","value":"{{ addScenesSetButton.testPlanStepId }}"}]},{"name":"scenesSetInParams","state":[{"name":"testPlanStepId","value":"{{ addScenesSetButton.testPlanStepId }}"}]}],"cancelExecuteButton":[{"name":"executeHistoryTable","state":[]},{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"refreshButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]}],"executeHistoryRefresh":[{"name":"executeHistoryTable","state":[{"name":"pageNo","value":"{{ executeHistoryRefresh.pageNo }}"}]},{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]}],"executeHistoryTable":[{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"refreshButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"cancelExecuteButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"},{"name":"pipelineDetail","value":"{{ executeAlertInfo.pipelineDetail }}"}]},{"name":"executeTaskBreadcrumb","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]}],"executeTaskBreadcrumb":[{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeTaskBreadcrumb.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"executeHistoryButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"}]},{"name":"refreshButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"},{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"cancelExecuteButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"},{"name":"pipelineDetail","value":"{{ executeAlertInfo.pipelineDetail }}"}]}],"executeTaskTable":[{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeTaskTable.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"executeTaskBreadcrumb","state":[{"name":"name","value":"{{ executeTaskTable.name }}"},{"name":"pipelineId","value":"{{ executeTaskTable.pipelineId }}"},{"name":"unfold","value":"{{ executeTaskTable.unfold }}"}]},{"name":"executeHistoryButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"}]},{"name":"refreshButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"}]}],"fileDetail":[{"name":"executeHead","state":[]},{"name":"executeHistoryTable","state":[]},{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"executeTaskTitle","state":[]},{"name":"executeTaskBreadcrumb","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"cancelExecuteButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"},{"name":"pipelineDetail","value":"{{ executeAlertInfo.pipelineDetail }}"}]},{"name":"executeHistoryButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"}]},{"name":"refreshButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeInfoTitle","state":[]},{"name":"executeHistoryRefresh","state":[]}],"refreshButton":[{"name":"executeHistoryTable","state":[]},{"name":"executeInfo","state":[]},{"name":"executeTaskTable","state":[{"name":"pipelineDetail","value":"{{ executeInfo.pipelineDetail }}"}]},{"name":"executeAlertInfo","state":[]},{"name":"cancelExecuteButton","state":[{"name":"pipelineId","value":"{{ executeAlertInfo.pipelineId }}"},{"name":"pipelineDetail","value":"{{ executeAlertInfo.pipelineDetail }}"}]}],"scenesSetInParams":[{"name":"scenesSetDrawer","state":[{"name":"visible","value":"{{ scenesSetInParams.visible }}"}]},{"name":"stages","state":[]}],"scenesSetSelect":[{"name":"scenesSetInParams","state":[{"name":"scenesSetId","value":"{{ scenesSetSelect.scenesSetId }}"},{"name":"testPlanStepId","value":"{{ scenesSetSelect.testPlanStepId }}"}]}],"stages":[{"name":"scenesSetDrawer","state":[{"name":"visible","value":"{{ stages.showScenesSetDrawer }}"}]},{"name":"scenesSetSelect","state":[{"name":"visible","value":"{{ stages.showScenesSetDrawer }}"},{"name":"testPlanStepId","value":"{{ stages.stepId }}"}]},{"name":"scenesSetInParams","state":[{"name":"scenesSetId","value":"{{ scenesSetSelect.scenesSetId }}"},{"name":"testPlanStepId","value":"{{ stages.stepId }}"}]}],"tabExecuteButton":[{"name":"executeHistoryTable","state":[]},{"name":"executeInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskTable"},{"name":"executeAlertInfo","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"cancelExecuteButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeTaskBreadcrumb","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"fileDetail","state":[{"name":"activeKey","value":"{{ tabExecuteButton.activeKey }}"}]},{"name":"refreshButton","state":[{"name":"pipelineId","value":"{{ executeHistoryTable.pipelineId }}"}]},{"name":"executeHistoryButton","state":[{"name":"visible","value":"{{ executeTaskBreadcrumb.visible }}"}]}]}},"event":{"component":"tabExecuteButton","operation":"execute","operationData":{"meta":{"ConfigEnv":"autotest^scope-project-autotest-testcase^scopeid-6^369797316552438452","env":"terminus-dev","testPlanID":4}}},"inParams":{"projectId":6,"testPlanId":4}}
###
### 获取 oauth2 client token
POST {{openapi}}/oauth2/token?grant_type=client_credentials&client_id=xxx&client_secret=yyy

{
    "accessibleAPIs":[
        {
            "path":"/api/pipelines/<pipelineID>/tasks/<taskID>/actions/get-bootstrap-info",
            "method":"GET",
            "schema":"http"
        },
        {
            "path":"/api/pipelines/<pipelineID>/actions/run",
            "method":"POST",
            "schema":"http"
        },
        {
            "path":"/api/files",
            "method":"POST",
            "schema":"http"
        }
    ],
    "metadata":{
        "User-ID": "2",
        "pipelineID": "10000098",
        "taskID": "340"
    },
    "accessTokenExpiredIn": "0"
}

### 失效 oauth2 client token
POST {{openapi}}/oauth2/invalidate_token?access_token=xxx

### 校验 oauth2 client token
POST {{openapi}}/oauth2/validate_token?access_token=xxx

### token api: without wildcatd
POST {{openapi}}/api/pipelines/actions/callback
Authorization: Bearer xxx

### token api: with wildcard
POST {{openapi}}/api/pipelines/1/actions/run
Authorization: Bearer xxx

### token api: action bootstrap
GET {{openapi}}/api/pipelines/10000009/tasks/38/actions/get-bootstrap-info
Authorization: Bearer xxx

###
POST http://127.0.0.1:9529/api/component-protocol/actions/render
Authorization: Bearer xxx
Content-Type: application/json
openapi-csrf-token: a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09
cookie: taid=586413ea-1564-4175-9965-5475818698c5; Hm_lvt_210739f1f314f3bf914d4ecf7cfa151b=1627872423; Hm_lpvt_210739f1f314f3bf914d4ecf7cfa151b=1627882787; lng=zh-CN; u_c_captain_dev_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiI2ZTcwMzI1ZDY0MDRkNGQwOTI1ZDFiMzU0YmMxMjY1NGNjZmUyMGNlZTFiOWQ3ZGQ0YjdmOWI2NjRmYWE5N2I3IiwibmJmIjoxNjI5OTc2NzYyLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDU4MTU2MiwiaWF0IjoxNjI5OTc2NzYyfQ.l2E_mYeDsxKWycoJXmwcclUN7wq8PafOB5lAzXVsmrQ; OPENAPISESSION=07092eae-3668-4029-abe6-54787ac32d52; u_c_captain_hkci_local=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJsb2dpbiIsInBhdGgiOiIvIiwidG9rZW5LZXkiOiIyYjllYzhlMGRjNDdhODFmNjIzODJlZTg1OTkxZDc3M2RhMTdlYWIyMWUyMzgzNTMxMDM4N2FmZDU0NWYyMzJjIiwibmJmIjoxNjMwMTI4MjkzLCJkb21haW4iOiJ0ZXJtaW51cy5pbyIsImlzcyI6ImRyYWNvIiwidGVuYW50SWQiOjEsImV4cGlyZV90aW1lIjo2MDQ4MDAsImV4cCI6MTYzMDczMzA5MywiaWF0IjoxNjMwMTI4MjkzfQ.Mtsr-U5n7ygnb_91kpU-ue8_FWjA7CXHuegUqLJiLfo; OPENAPI-CSRF-TOKEN=a6b2c510a2e68d2c82cb76ab48f2e00c0000a8c999f63eb55e3c9b20a4a4b3ef2b213c8bb13682e9e35e710ef5b0ab09

{
    "scenario": {
        "scenarioType": "auto-test-space-list",
        "scenarioKey": "auto-test-space-list"
    },
    "inParams": {
        "projectId": 2
    }
}
###

POST http://127.0.0.1:9529/oauth2/token?grant_type=client_credentials&client_id=xxx&client_secret=yyy HTTP/1.1
Accept: application/vnd.dice+json;version=1.0
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9
Connection: keep-alive
Content-Length: 126
Content-Type: application/json

{
  "allowAccessAllApIs": true,
  "metadata": {
    "User-ID": "2",
    "Org-ID": "1"
  }
}


###

GET http://127.0.0.1:9529/api/issues
Authorization: Bearer xxx

###

GET http://localhost:9529/api/applications?pageSize=30&pageNo=1&isPublic=true&projectId=1
cookie: OPENAPI-CSRF-TOKEN=xxx; taid=xxx; u_c_captain_dev_local=xxx; OPENAPISESSION=xxx

###
